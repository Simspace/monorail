"use strict";(self.webpackChunk_monorail_storybook=self.webpackChunk_monorail_storybook||[]).push([[5371],{"../../node_modules/@mui/base/ClickAwayListener/ClickAwayListener.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>ClickAwayListener});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_mui_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@mui/utils/esm/useForkRef/useForkRef.js"),_mui_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@mui/utils/esm/useEventCallback/useEventCallback.js"),_mui_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@mui/utils/esm/ownerDocument/ownerDocument.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function mapEventPropToEvent(eventProp){return eventProp.substring(2).toLowerCase()}function ClickAwayListener(props){const{children,disableReactTree=!1,mouseEvent="onClick",onClickAway,touchEvent="onTouchEnd"}=props,movedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1),nodeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),activatedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1),syntheticEventRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1);react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>(setTimeout((()=>{activatedRef.current=!0}),0),()=>{activatedRef.current=!1})),[]);const handleRef=(0,_mui_utils__WEBPACK_IMPORTED_MODULE_2__.Z)(children.ref,nodeRef),handleClickAway=(0,_mui_utils__WEBPACK_IMPORTED_MODULE_3__.Z)((event=>{const insideReactTree=syntheticEventRef.current;syntheticEventRef.current=!1;const doc=(0,_mui_utils__WEBPACK_IMPORTED_MODULE_4__.Z)(nodeRef.current);if(!activatedRef.current||!nodeRef.current||"clientX"in event&&function clickedRootScrollbar(event,doc){return doc.documentElement.clientWidth<event.clientX||doc.documentElement.clientHeight<event.clientY}(event,doc))return;if(movedRef.current)return void(movedRef.current=!1);let insideDOM;insideDOM=event.composedPath?event.composedPath().indexOf(nodeRef.current)>-1:!doc.documentElement.contains(event.target)||nodeRef.current.contains(event.target),insideDOM||!disableReactTree&&insideReactTree||onClickAway(event)})),createHandleSynthetic=handlerName=>event=>{syntheticEventRef.current=!0;const childrenPropsHandler=children.props[handlerName];childrenPropsHandler&&childrenPropsHandler(event)},childrenProps={ref:handleRef};return!1!==touchEvent&&(childrenProps[touchEvent]=createHandleSynthetic(touchEvent)),react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{if(!1!==touchEvent){const mappedTouchEvent=mapEventPropToEvent(touchEvent),doc=(0,_mui_utils__WEBPACK_IMPORTED_MODULE_4__.Z)(nodeRef.current),handleTouchMove=()=>{movedRef.current=!0};return doc.addEventListener(mappedTouchEvent,handleClickAway),doc.addEventListener("touchmove",handleTouchMove),()=>{doc.removeEventListener(mappedTouchEvent,handleClickAway),doc.removeEventListener("touchmove",handleTouchMove)}}}),[handleClickAway,touchEvent]),!1!==mouseEvent&&(childrenProps[mouseEvent]=createHandleSynthetic(mouseEvent)),react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{if(!1!==mouseEvent){const mappedMouseEvent=mapEventPropToEvent(mouseEvent),doc=(0,_mui_utils__WEBPACK_IMPORTED_MODULE_4__.Z)(nodeRef.current);return doc.addEventListener(mappedMouseEvent,handleClickAway),()=>{doc.removeEventListener(mappedMouseEvent,handleClickAway)}}}),[handleClickAway,mouseEvent]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(children,childrenProps)})}},"./src/ClickAwayListener/ClickAwayListener.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,LeadingEdge:()=>LeadingEdge,WithPortal:()=>WithPortal,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_mui_base__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@mui/base/Portal/Portal.js"),_monorail_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../components/src/ClickAwayListener/ClickAwayListener.tsx"),_monorail_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../components/src/Box/Box.tsx"),_helpers_storybook_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/storybook.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Utils/ClickAwayListener",component:_monorail_components__WEBPACK_IMPORTED_MODULE_3__.d},Template=(0,_helpers_storybook_js__WEBPACK_IMPORTED_MODULE_1__.yg)((args=>{const[open,setOpen]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_monorail_components__WEBPACK_IMPORTED_MODULE_3__.d,{onClickAway:()=>{setOpen(!1)},...args,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_monorail_components__WEBPACK_IMPORTED_MODULE_4__.x,{sx:{position:"relative"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{type:"button",onClick:()=>{setOpen((prev=>!prev))},children:"Open menu dropdown"}),open?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_monorail_components__WEBPACK_IMPORTED_MODULE_4__.x,{sx:{position:"absolute",top:28,right:0,left:0,zIndex:1,border:"1px solid",p:1,bgcolor:"background.paper"},children:"Click me, I will stay visible until you click outside."}):null]})})}),{args:{}}),Default=(0,_helpers_storybook_js__WEBPACK_IMPORTED_MODULE_1__.yg)(Template),WithPortal=(0,_helpers_storybook_js__WEBPACK_IMPORTED_MODULE_1__.yg)((()=>{const[open,setOpen]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_monorail_components__WEBPACK_IMPORTED_MODULE_3__.d,{onClickAway:()=>{setOpen(!1)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{type:"button",onClick:()=>{setOpen((prev=>!prev))},children:"Open menu dropdown"}),open?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_mui_base__WEBPACK_IMPORTED_MODULE_5__.h,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_monorail_components__WEBPACK_IMPORTED_MODULE_4__.x,{sx:{position:"fixed",width:200,top:"50%",left:"50%",transform:"translate(-50%, -50%)",border:"1px solid",p:1,bgcolor:"background.paper"},children:"Click me, I will stay visible until you click outside. This content is in a Portal."})}):null]})})})),LeadingEdge=(0,_helpers_storybook_js__WEBPACK_IMPORTED_MODULE_1__.yg)((()=>{const[open,setOpen]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_monorail_components__WEBPACK_IMPORTED_MODULE_3__.d,{mouseEvent:"onMouseDown",touchEvent:"onTouchStart",onClickAway:()=>{setOpen(!1)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_monorail_components__WEBPACK_IMPORTED_MODULE_4__.x,{sx:{position:"relative"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{type:"button",onClick:()=>{setOpen((prev=>!prev))},children:"Open menu dropdown"}),open?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_monorail_components__WEBPACK_IMPORTED_MODULE_4__.x,{sx:{position:"absolute",top:28,right:0,left:0,zIndex:1,border:"1px solid",p:1,bgcolor:"background.paper"},children:"Click me, I will stay visible until you click outside."}):null]})})}));Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"story(Template)",...Default.parameters?.docs?.source}}},WithPortal.parameters={...WithPortal.parameters,docs:{...WithPortal.parameters?.docs,source:{originalSource:"story<ClickAwayListenerProps>(() => {\n  const [open, setOpen] = React.useState(false);\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n  const styles = ({\n    position: 'fixed',\n    width: 200,\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    border: '1px solid',\n    p: 1,\n    bgcolor: 'background.paper'\n  } as const);\n  return <ClickAwayListener onClickAway={handleClickAway}>\n      <div>\n        <button type=\"button\" onClick={handleClick}>\n          Open menu dropdown\n        </button>\n        {open ? <Portal>\n            <Box sx={styles}>\n              Click me, I will stay visible until you click outside. This\n              content is in a Portal.\n            </Box>\n          </Portal> : null}\n      </div>\n    </ClickAwayListener>;\n})",...WithPortal.parameters?.docs?.source},description:{story:'The following demo uses Portal to render the dropdown into a new "subtree" outside of current DOM hierarchy.',...WithPortal.parameters?.docs?.description}}},LeadingEdge.parameters={...LeadingEdge.parameters,docs:{...LeadingEdge.parameters?.docs,source:{originalSource:"story<ClickAwayListenerProps>(() => {\n  const [open, setOpen] = React.useState(false);\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n  const styles = ({\n    position: 'absolute',\n    top: 28,\n    right: 0,\n    left: 0,\n    zIndex: 1,\n    border: '1px solid',\n    p: 1,\n    bgcolor: 'background.paper'\n  } as const);\n  return <ClickAwayListener mouseEvent=\"onMouseDown\" touchEvent=\"onTouchStart\" onClickAway={handleClickAway}>\n      <Box sx={{\n      position: 'relative'\n    }}>\n        <button type=\"button\" onClick={handleClick}>\n          Open menu dropdown\n        </button>\n        {open ? <Box sx={styles}>\n            Click me, I will stay visible until you click outside.\n          </Box> : null}\n      </Box>\n    </ClickAwayListener>;\n})",...LeadingEdge.parameters?.docs?.source},description:{story:"By default, the component responds to the trailing events (click + touch end). However, you can configure it to respond to the leading events (mouse down + touch start).",...LeadingEdge.parameters?.docs?.description}}};const __namedExportsOrder=["Default","WithPortal","LeadingEdge"];try{WithPortal.displayName="WithPortal",WithPortal.__docgenInfo={description:'The following demo uses Portal to render the dropdown into a new "subtree" outside of current DOM hierarchy.',displayName:"WithPortal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickAwayListener/ClickAwayListener.stories.tsx#WithPortal"]={docgenInfo:WithPortal.__docgenInfo,name:"WithPortal",path:"src/ClickAwayListener/ClickAwayListener.stories.tsx#WithPortal"})}catch(__react_docgen_typescript_loader_error){}try{LeadingEdge.displayName="LeadingEdge",LeadingEdge.__docgenInfo={description:"By default, the component responds to the trailing events (click + touch end). However, you can configure it to respond to the leading events (mouse down + touch start).",displayName:"LeadingEdge",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ClickAwayListener/ClickAwayListener.stories.tsx#LeadingEdge"]={docgenInfo:LeadingEdge.__docgenInfo,name:"LeadingEdge",path:"src/ClickAwayListener/ClickAwayListener.stories.tsx#LeadingEdge"})}catch(__react_docgen_typescript_loader_error){}},"../components/src/ClickAwayListener/ClickAwayListener.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>ClickAwayListener});const ClickAwayListener=__webpack_require__("../../node_modules/@mui/base/ClickAwayListener/ClickAwayListener.js").d;try{ClickAwayListener.displayName="ClickAwayListener",ClickAwayListener.__docgenInfo={description:"Listen for click events that occur somewhere in the document, outside of the element itself.\nFor instance, if you need to hide a menu when people click anywhere else on your page.\n\nDemos:\n\n- [Click away listener](https://simspace.gitlab.io/engineering/ux-engineering/monorail/main/storybook/?path=/docs/utils-clickawaylistener--default)\n- [Click away listener (MUI)](https://mui.com/base/react-click-away-listener/)\n\nAPI:\n\n- [ClickAwayListener API](https://mui.com/base/api/click-away-listener/)",displayName:"ClickAwayListener",props:{children:{defaultValue:null,description:"The wrapped element.",name:"children",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},disableReactTree:{defaultValue:{value:"false"},description:"If `true`, the React tree is ignored and only the DOM tree is considered.\nThis prop changes how portaled elements are handled.",name:"disableReactTree",required:!1,type:{name:"boolean"}},mouseEvent:{defaultValue:{value:"'onClick'"},description:"The mouse event to listen to. You can disable the listener by providing `false`.",name:"mouseEvent",required:!1,type:{name:"false | ClickAwayMouseEventHandler"}},touchEvent:{defaultValue:{value:"'onTouchEnd'"},description:"The touch event to listen to. You can disable the listener by providing `false`.",name:"touchEvent",required:!1,type:{name:"false | ClickAwayTouchEventHandler"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../components/src/ClickAwayListener/ClickAwayListener.tsx#ClickAwayListener"]={docgenInfo:ClickAwayListener.__docgenInfo,name:"ClickAwayListener",path:"../components/src/ClickAwayListener/ClickAwayListener.tsx#ClickAwayListener"})}catch(__react_docgen_typescript_loader_error){}},"./src/helpers/storybook.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u3:()=>getRawColorObject,pQ:()=>isMeteorTheme,yg:()=>story});var light=__webpack_require__("../themes/src/meteor/theme/light.ts"),dark=__webpack_require__("../themes/src/classic/theme/dark.ts"),theme_light=__webpack_require__("../themes/src/classic/theme/light.ts"),theme_dark=__webpack_require__("../themes/src/meteor/theme/dark.ts"),theme=__webpack_require__("../themes/src/mui/theme.ts"),pcte_theme_dark=__webpack_require__("../themes/src/pcte/theme/dark.tsx"),pcte_theme_light=__webpack_require__("../themes/src/pcte/theme/light.tsx");let ThemeName=function(ThemeName){return ThemeName.MeteorLight="meteorLight",ThemeName.MeteorDark="meteorDark",ThemeName.ClassicLight="classicLight",ThemeName.ClassicDark="classicDark",ThemeName.MUILight="muiLight",ThemeName.MUIDark="muiDark",ThemeName.PCTELight="pcteLight",ThemeName.PCTEDark="pcteDark",ThemeName}({});const isNonEmptyString=x=>(x=>"string"==typeof x)(x)&&x.length>0;let A11yElement=function(A11yElement){return A11yElement.Root="#root",A11yElement.Component="#root > *",A11yElement.Modal=".MuiDialog-root",A11yElement.Popover=".MuiPopover-root",A11yElement.Drawer=".MuiDrawer-root",A11yElement}({});A11yElement.Root,A11yElement.Component;function story(Template,{args,argTypes,parameters,storyName,muiName}={}){let themeProps={};muiName&&(themeProps=light.D4.components?.[muiName]?.defaultProps);const NewStory=Template.bind({});return NewStory.args={...themeProps,...Template.args,...args},NewStory.argTypes={...Template.argTypes,...argTypes},NewStory.parameters={...Template.parameters,...parameters},isNonEmptyString(storyName)&&(NewStory.storyName=storyName),NewStory}const getRawColorObject=themeName=>{switch(themeName){case ThemeName.MeteorLight:return light.Yf;case ThemeName.MeteorDark:return theme_dark.Yf;case ThemeName.ClassicLight:return theme_light.Yf;case ThemeName.ClassicDark:return dark.Yf;case ThemeName.MUILight:case ThemeName.MUIDark:return theme.Yf;case ThemeName.PCTELight:return pcte_theme_light.Yf;case ThemeName.PCTEDark:return pcte_theme_dark.Yf}},isMeteorTheme=themeName=>themeName===ThemeName.MeteorLight||themeName===ThemeName.MeteorDark}}]);