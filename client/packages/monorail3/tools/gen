#! /usr/bin/env bash
set -euo pipefail

# This script should be invoked using `yarn gen` from the root monorail3 directory
pwd

# Compile b/c the gen script has a list of components to generate
echo "Running tsc for code & tools..."
yarn tsc

echo "Running code gen script..."
node ./dist/tools/generateMonorailFromMUI.js

echo "Running Prettier on generated files..."
../../node_modules/.bin/prettier './src/**/*{.ts,.tsx}' --write

echo "Running tsc again..."
yarn tsc

echo "Running jest tests..."
yarn jest

echo "Done!"
